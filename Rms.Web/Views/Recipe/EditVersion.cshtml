
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <link href="~/Scripts/layui/css/layui.css" rel="stylesheet" />
    <script src="~/Scripts/layui/layui.js"></script>

</head>
<body>
    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-md6">
                <textarea id="textarea1" class="layui-textarea" rows="30" readonly></textarea>
            </div>
            <div class="layui-col-md6">
                <textarea id="textarea2" class="layui-textarea" rows="30" oninput="compareText()"></textarea>
            </div>
        </div>
        @*<div class="layui-row">
                <div class="layui-col-md12">
                    <button id="compareBtn" class="layui-btn">比较</button>
                </div>
            </div>*@
        <div class="layui-row">
            <div class="layui-col-md12">
                <div id="output" class="layui-form-item"></div>
            </div>
        </div>
    </div>
    <script>
        layui.use(['layer','jquery'], function () {
            var layer = layui.layer;
            var $ = layui.jquery;

            $.ajax({
                    url: '../Recipe/GetVersionSml',//控制器活动,返回一个分部视图,并且给分部视图传递数据.
                    data: {
                        RecipeVersionId:  '@ViewBag.RecipeVersionId'
                    },//传给服务器的数据(即后台AddUsers()方法的参数,参数类型要一致才可以)
                    type: 'POST',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',//数据类型必须有
                    async: false,
                    success: function (data) {
                        if (data.Result) {
                            document.getElementById("textarea1").value = data.BodySml;
                            document.getElementById("textarea2").value = data.BodySml;
                        } else {
                            document.getElementById("textarea1").value = data.Message;
                        }
                
                
                    },
                    error: function (message) {
                        alert('error!');
                    }
            });


            //var content = "S7F26\r\n  <L[4]\r\n    <A[9] 'TMQE08E-1'>\r\n    <A[6] 'LME001'>\r\n    <A[5] '1.2.0'>\r\n    <L[9]\r\n      <L[2]\r\n        <A[13] 'RESOURCE_INFO'>\r\n        <L[14]\r\n          <A[10] 'WAFER SIZE'>\r\n          <U2[1] 2>\r\n          <A[3] 'ROW'>\r\n          <U2[1] 114>\r\n          <A[6] 'COLUMN'>\r\n          <U2[1] 77>\r\n          <A[10] 'STEPPING X'>\r\n          <A[8] '3.758000'>\r\n          <A[10] 'STEPPING Y'>\r\n          <A[8] '2.532000'>\r\n          <A[8] 'GOOD BIN'>\r\n          <A[1] '0'>\r\n          <A[9] 'USING BIN'>\r\n          <A[10] '0 1 4 5 FF'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[16] 'LASER_PARAM_INFO'>\r\n        <L[60]\r\n          <A[12] 'L1_DRAW STEP'>\r\n          <U2[1] 3>\r\n          <A[12] 'L1_JUMP STEP'>\r\n          <U2[1] 30>\r\n          <A[14] 'L1_STEP PERIOD'>\r\n          <U2[1] 30>\r\n          <A[15] 'L1_CORNER DELAY'>\r\n          <U2[1] 60>\r\n          <A[13] 'L1_JUMP DELAY'>\r\n          <U2[1] 600>\r\n          <A[13] 'L1_LINE DELAY'>\r\n          <U2[1] 400>\r\n          <A[17] 'L1_LASER ON DELAY'>\r\n          <U2[1] 50>\r\n          <A[18] 'L1_LASER OFF DELAY'>\r\n          <U2[1] 120>\r\n          <A[12] 'L1_FREQUENCY'>\r\n          <U2[1] 45000>\r\n          <A[12] 'L1_FPS DELAY'>\r\n          <U2[1] 10000>\r\n          <A[19] 'L1_SHORT JUMP DELAY'>\r\n          <U2[1] 0>\r\n          <A[22] 'L1_SHORT JUMP DISTANCE'>\r\n          <U2[1] 0>\r\n          <A[12] 'L1_APC VALUE'>\r\n          <U2[1] 450>\r\n          <A[16] 'L1_Q SW SUP TIME'>\r\n          <U2[1] 7928>\r\n          <A[17] 'L1_Q SW FREQUENCY'>\r\n          <U2[1] 45000>\r\n          <A[12] 'L2_DRAW STEP'>\r\n          <U2[1] 3>\r\n          <A[12] 'L2_JUMP STEP'>\r\n          <U2[1] 30>\r\n          <A[14] 'L2_STEP PERIOD'>\r\n          <U2[1] 30>\r\n          <A[15] 'L2_CORNER DELAY'>\r\n          <U2[1] 60>\r\n          <A[13] 'L2_JUMP DELAY'>\r\n          <U2[1] 600>\r\n          <A[13] 'L2_LINE DELAY'>\r\n          <U2[1] 400>\r\n          <A[17] 'L2_LASER ON DELAY'>\r\n          <U2[1] 50>\r\n          <A[18] 'L2_LASER OFF DELAY'>\r\n          <U2[1] 130>\r\n          <A[12] 'L2_FREQUENCY'>\r\n          <U2[1] 45000>\r\n          <A[12] 'L2_FPS DELAY'>\r\n          <U2[1] 11000>\r\n          <A[19] 'L2_SHORT JUMP DELAY'>\r\n          <U2[1] 0>\r\n          <A[22] 'L2_SHORT JUMP DISTANCE'>\r\n          <U2[1] 0>\r\n          <A[12] 'L2_APC VALUE'>\r\n          <U2[1] 450>\r\n          <A[16] 'L2_Q SW SUP TIME'>\r\n          <U2[1] 7928>\r\n          <A[17] 'L2_Q SW FREQUENCY'>\r\n          <U2[1] 45000>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'LOGO1_OBJECT_INFO'>\r\n        <L[10]\r\n          <A[8] 'FILEPATH'>\r\n          <A[23] 'C:\\CSM2K\\LOGO\\PIN20.PLT'>\r\n          <A[4] 'LEFT'>\r\n          <A[8] '0.237254'>\r\n          <A[5] 'RIGHT'>\r\n          <A[8] '0.437362'>\r\n          <A[3] 'TOP'>\r\n          <A[8] '2.091511'>\r\n          <A[6] 'BOTTOM'>\r\n          <A[8] '2.291619'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[15] 'TEXT_COUNT_INFO'>\r\n        <L[1]\r\n          <U2[1] 5>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'TEXT1_OBJECT_INFO'>\r\n        <L[18]\r\n          <A[9] 'OBJECTNUM'>\r\n          <U2[1] 1>\r\n          <A[7] 'CONTENT'>\r\n          <A[7] '040-035'>\r\n          <A[4] 'FONT'>\r\n          <A[26] 'C:\\CSM2K\\FONT\\ARIAL20P.FNT'>\r\n          <A[6] 'HEIGHT'>\r\n          <A[6] '0.2669'>\r\n          <A[5] 'WIDTH'>\r\n          <A[6] '0.1900'>\r\n          <A[12] 'SPECIAL TYPE'>\r\n          <U2[1] 4>\r\n          <A[13] 'REFERENCE NUM'>\r\n          <U2[1] 1>\r\n          <A[11] 'OBJECT TYPE'>\r\n          <A[4] 'TEXT'>\r\n          <A[12] 'DISPLAY RECT'>\r\n          <A[16] '677,194,1132,259'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'TEXT2_OBJECT_INFO'>\r\n        <L[18]\r\n          <A[9] 'OBJECTNUM'>\r\n          <U2[1] 2>\r\n          <A[7] 'CONTENT'>\r\n          <A[10] '1234567890'>\r\n          <A[4] 'FONT'>\r\n          <A[26] 'C:\\CSM2K\\FONT\\ARIAL20P.FNT'>\r\n          <A[6] 'HEIGHT'>\r\n          <A[6] '0.2673'>\r\n          <A[5] 'WIDTH'>\r\n          <A[6] '0.1900'>\r\n          <A[12] 'SPECIAL TYPE'>\r\n          <U2[1] 0>\r\n          <A[13] 'REFERENCE NUM'>\r\n          <U2[1] 0>\r\n          <A[11] 'OBJECT TYPE'>\r\n          <A[4] 'TEXT'>\r\n          <A[12] 'DISPLAY RECT'>\r\n          <A[16] '480,587,1133,653'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'TEXT3_OBJECT_INFO'>\r\n        <L[18]\r\n          <A[9] 'OBJECTNUM'>\r\n          <U2[1] 3>\r\n          <A[7] 'CONTENT'>\r\n          <A[9] 'T805A3-05'>\r\n          <A[4] 'FONT'>\r\n          <A[26] 'C:\\CSM2K\\FONT\\ARIAL20P.FNT'>\r\n          <A[6] 'HEIGHT'>\r\n          <A[6] '0.2673'>\r\n          <A[5] 'WIDTH'>\r\n          <A[6] '0.1900'>\r\n          <A[12] 'SPECIAL TYPE'>\r\n          <U2[1] 0>\r\n          <A[13] 'REFERENCE NUM'>\r\n          <U2[1] 0>\r\n          <A[11] 'OBJECT TYPE'>\r\n          <A[4] 'TEXT'>\r\n          <A[12] 'DISPLAY RECT'>\r\n          <A[16] '546,489,1133,554'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'TEXT4_OBJECT_INFO'>\r\n        <L[18]\r\n          <A[9] 'OBJECTNUM'>\r\n          <U2[1] 4>\r\n          <A[7] 'CONTENT'>\r\n          <A[8] 'USI NO.1'>\r\n          <A[4] 'FONT'>\r\n          <A[26] 'C:\\CSM2K\\FONT\\ARIAL20P.FNT'>\r\n          <A[6] 'HEIGHT'>\r\n          <A[6] '0.2669'>\r\n          <A[5] 'WIDTH'>\r\n          <A[6] '0.1899'>\r\n          <A[12] 'SPECIAL TYPE'>\r\n          <U2[1] 0>\r\n          <A[13] 'REFERENCE NUM'>\r\n          <U2[1] 0>\r\n          <A[11] 'OBJECT TYPE'>\r\n          <A[4] 'TEXT'>\r\n          <A[12] 'DISPLAY RECT'>\r\n          <A[16] '806,390,1133,456'>\r\n        >\r\n      >\r\n      <L[2]\r\n        <A[17] 'TEXT5_OBJECT_INFO'>\r\n        <L[18]\r\n          <A[9] 'OBJECTNUM'>\r\n          <U2[1] 5>\r\n          <A[7] 'CONTENT'>\r\n          <A[4] '2344'>\r\n          <A[4] 'FONT'>\r\n          <A[26] 'C:\\CSM2K\\FONT\\ARIAL20P.FNT'>\r\n          <A[6] 'HEIGHT'>\r\n          <A[6] '0.2669'>\r\n          <A[5] 'WIDTH'>\r\n          <A[6] '0.1899'>\r\n          <A[12] 'SPECIAL TYPE'>\r\n          <U2[1] 0>\r\n          <A[13] 'REFERENCE NUM'>\r\n          <U2[1] 0>\r\n          <A[11] 'OBJECT TYPE'>\r\n          <A[4] 'TEXT'>\r\n          <A[12] 'DISPLAY RECT'>\r\n          <A[16] '873,292,1132,358'>\r\n        >\r\n      >\r\n    >\r\n  >\r\n.\r\n\r\n";
            //document.getElementById("textarea1").value = content;

            

            var retdata = {};

            window.callback = function () {
                retdata.editedBody = document.getElementById("textarea2").value;
                return retdata;
            };
        });

        function compareText() {
            var textarea1 = document.getElementById("textarea1");
            var textarea2 = document.getElementById("textarea2");
            var outputDiv = document.getElementById("output");

            var text1 = textarea1.value.split("\n");
            var text2 = textarea2.value.split("\n");

            var diffLines = [];
            for (var i = 0; i < Math.max(text1.length, text2.length); i++) {
                if (text1[i] !== text2[i]) {
                    diffLines.push(i + 1);
                }
            }

            if (diffLines.length > 0) {
                outputDiv.innerHTML = "不同行的比较结果：<br>" + diffLines.join(", ");
            } else {
                outputDiv.innerHTML = "两个文本框的内容相同。";
            }
        }


    </script>
</body>
</html>

